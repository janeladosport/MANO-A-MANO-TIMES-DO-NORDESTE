var golSport = ["Goleiro", "gol-esc", "imagens/sport/caique-frança.png", "imagens/sport/thiago-couto.png", "imagens/sport/davi.png"]
var ldSport = ["Lateral direita", "ld-esc", "imagens/sport/hereda.png", "imagens/sport/matheus-alexandre.png", "imagens/sport/di-placido.png", "imagens/sport/du-queiroz.png"] 
var zdSport = ["Zagueiro Direito", "zd-esc", "imagens/sport/joao-silva.png", "imagens/sport/lucas-cunha.png", "imagens/sport/antonio-carlos.png", "imagens/sport/marcelo-ajul.png", "imagens/sport/rafael-thyere.png"]
var zeSport = ["Zagueiro Esquerdo", "ze-esc", "imagens/sport/chico.png", "imagens/sport/joao-silva.png", "imagens/sport/renzo.png"] 
var leSport = ["Lateral Esquerda", "le-esc", "imagens/sport/igor-carius.png", "imagens/sport/dalbert.png"]    
var volSport = ["1º Volante", "vol-esc", "imagens/sport/christian-rivera.png", "imagens/sport/du-queiroz.png", "imagens/sport/adriel.png", "imagens/sport/ze-lucas.png"]    
var mcSport = ["2º Volante", "mc-esc", "imagens/sport/sergio-oliveira.png", "imagens/sport/dominguez.png", "imagens/sport/du-queiroz.png"]
var meiSport = ["Meia", "mei-esc", "imagens/sport/lucas-lima.png", "imagens/sport/hyoran.png", "imagens/sport/titi-ortiz.png", "imagens/sport/sergio-oliveira.png", "imagens/sport/chino-atencio.png"]
var pdSport = ["Ponta direita", "pd-esc", "imagens/sport/chino-atencio.png", "imagens/sport/barletta.png", "imagens/sport/lenny-lobato.png", "imagens/sport/romarinho.png", "imagens/sport/lucas-lima.png"]
var peSport = ["Ponta esquerda", "pe-esc", "imagens/sport/barletta.png", "imagens/sport/lenny-lobato.png", "imagens/sport/romarinho.png", "imagens/sport/gustavo-maia.png", "imagens/sport/carlos-alberto.png"]
var caSport = ["Centroavante", "ca-esc", "imagens/sport/paciencia.png", "imagens/sport/pablo.png", "imagens/sport/artur-sousa.png" ,"imagens/sport/lenny-lobato.png"]

var golBahia = ["Goleiro", "gol-esc" , "imagens/bahia/marcos-felipe.png", "imagens/bahia/danilo-fernandes.png", "imagens/bahia/denis-junior.png"]
var ldBahia = ["Lateral Direito" , "ld-esc", "imagens/bahia/santi-arias.png", "imagens/bahia/gilberto.png"]
var leBahia = ["Lateral Esquerdo", "le-esc", "imagens/bahia/luciano-juba.png", "imagens/bahia/iago-borduchi.png", "imagens/bahia/ramos-mingo.png", "imagens/bahia/rezende.png"]
var zdBahia = ["Zagueiro Direito", "zd-esc", "imagens/bahia/kanu.png", "imagens/bahia/gabriel-xavier.png"]
var zeBahia = ["Zagueiro Esquerdo", "ze-esc", "imagens/bahia/ramos-mingo.png", "imagens/bahia/kanu.png", "imagens/bahia/vitor-hugo.png", "imagens/bahia/rezende.png"]
var volBahia = ["1º Volante", "vol-esc", "imagens/bahia/caio-alexandre.png", "imagens/bahia/acevedo.png", "imagens/bahia/rezende.png", "imagens/bahia/rodrigo-nestor.png"]
var mcBahia = ["2º volante", "mc-esc", "imagens/bahia/jean-lucas.png", "imagens/bahia/erick.png", "imagens/bahia/rodrigo-nestor.png"]
var meiBahia = ["Meia", "mei-esc", "imagens/bahia/everton-ribeiro.png", "imagens/bahia/cauly.png", "imagens/bahia/rodrigo-nestor.png", "imagens/bahia/erick.png"]
var pdBahia = ["Ponta direita", "pd-esc", "imagens/bahia/ademir.png", "imagens/bahia/everton-ribeiro.png", "imagens/bahia/lucho-rodriguez.png"]
var peBahia = ["Ponta esquerda", "pe-esc", "imagens/bahia/erick-pulga.png", "imagens/bahia/lucho-rodriguez.png", "imagens/bahia/luciano-juba.png"]
var caBahia = ["Centroavante", "ca-esc", "imagens/bahia/lucho-rodriguez.png", "imagens/bahia/william-jose.png"]

var golFortaleza = ["Goleiro", "gol-esc", "imagens/fortaleza/joao-ricardo.png", "imagens/fortaleza/brenno.png", "imagens/fortaleza/magrao.png"]
var ldFortaleza = ["Lateral Direito", "ld-esc", "imagens/fortaleza/eros-mancuso.png", "imagens/fortaleza/tinga.png", "imagens/fortaleza/britez.png"]
var leFortaleza = ["Lateral Esquerdo", "le-esc", "imagens/fortaleza/bruno-pacheco.png", "imagens/fortaleza/diogo-barbosa.png", "imagens/fortaleza/felipe-jonatan.png", "imagens/fortaleza/eros-mancuso.png", "imagens/fortaleza/gaston-avila.png"]
var zdFortaleza = ["Zagueiro Direito", "zd-esc", "imagens/fortaleza/david-luiz.png", "imagens/fortaleza/britez.png", "imagens/fortaleza/kuscevic.png", "imagens/fortaleza/gustavo-mancha.png"]
var zeFortaleza = ["Zagueiro Esquerdo", "ze-esc", "imagens/fortaleza/gaston-avila.png", "imagens/fortaleza/titi.png", "imagens/fortaleza/david-luiz.png"]
var volFortaleza = ["1º Volante", "vol-esc", "imagens/fortaleza/pol-fernandez.png", "imagens/fortaleza/rosseto.png", "imagens/fortaleza/ze-welisson.png", "imagens/fortaleza/lucas-sasha.png", "imagens/fortaleza/pedro-augusto.png"]
var mcFortaleza = ["2º Volante", "mc-esc", "imagens/fortaleza/ze-welisson.png", "imagens/fortaleza/lucas-sasha.png", "imagens/fortaleza/martinez.png"]
var meiFortaleza = ["Meia", "mei-esc", "imagens/fortaleza/pochettino.png", "imagens/fortaleza/calebe.png", "imagens/fortaleza/martinez.png", "imagens/fortaleza/kervin-andrade.png"]
var pdFortaleza = ["Ponta direita", "pd-esc", "imagens/fortaleza/pikachu.png", "imagens/fortaleza/marinho.png"]
var peFortaleza = ["Ponta esquerda", "pe-esc", "imagens/fortaleza/moises.png", "imagens/fortaleza/breno-lopes.png"]
var caFortaleza = ["Centroavante", "ca-esc", "imagens/fortaleza/lucero.png", "imagens/fortaleza/renato-kayzer.png", "imagens/fortaleza/dylan-borrero.png"]

var golVitoria = ["Goleiro", "gol-esc", "imagens/vitoria/lucas-arcanjo.png", "imagens/vitoria/gabriel.png", "imagens/vitoria/fintelman.png"]
var ldVitoria = ["Lateral Direito", "ld-esc", "imagens/vitoria/claudinho.png", "imagens/vitoria/raul-caceres.png"]
var leVitoria = ["Lateral Esquerdo", "le-esc", "imagens/vitoria/jamerson.png", "imagens/vitoria/hugo.png", "imagens/vitoria/ze-marcos.png"]
var zdVitoria = ["Zagueiro Direito", "zd-esc", "imagens/vitoria/neris.png", "imagens/vitoria/lucas-halter.png", "imagens/vitoria/camutanga.png", "imagens/vitoria/edu.png"]
var zeVitoria = ["Zaguerio Esquerdo", "ze-esc", "imagens/vitoria/lucas-halter.png", "imagens/vitoria/ze-marcos.png", "imagens/vitoria/neris.png"]
var volVitoria = ["1º Volante", "vol-esc", "imagens/vitoria/baralhas.png", "imagens/vitoria/dionisio.png", "imagens/vitoria/ricardo-ryller.png", "imagens/vitoria/val-soares.png", "imagens/vitoria/william-oliveira.png", "imagens/vitoria/thiago-conti.png"]
var mcVitoria = ["2º Volante", "mc-esc", "imagens/vitoria/pepê.png", "imagens/vitoria/ronald.png", "imagens/vitoria/dionisio.png", "imagens/vitoria/val-soares.png", "imagens/vitoria/william-oliveira.png", "imagens/vitoria/thiago-conti.png"]
var meiVitoria = ["Meia", "mei-esc", "imagens/vitoria/matheusinho.png", "imagens/vitoria/wellington-rato.png", "imagens/vitoria/pablo.png", "imagens/vitoria/pepê.png"]
var pdVitoria = ["Ponta direita", "pd-esc", "imagens/vitoria/gustavo-mosquito.png", "imagens/vitoria/lucas-braga.png", "imagens/vitoria/wellington-rato.png", "imagens/vitoria/matheusinho.png", "imagens/vitoria/janderson.png"]
var peVitoria = ["Ponta esquerda", "pe-esc", "imagens/vitoria/lucas-braga.png", "imagens/vitoria/wellington-rato.png", "imagens/vitoria/carlos-eduardo.png", "imagens/vitoria/bruno-xavier.png"]
var caVitoria = ["Centroavante", "ca-esc", "imagens/vitoria/janderson.png", "imagens/vitoria/fabri.png", "imagens/vitoria/carlinhos.png"]

var golCeara = ["Goleiro", "gol-esc", "imagens/ceara/bruno-ferreira.png", "imagens/ceara/fernando-miguel.png", "imagens/ceara/keiller.png", "imagens/ceara/richard.png"]
var ldCeara = ["Lateral Direito", "ld-esc", "imagens/ceara/fabiano-souza.png", "imagens/ceara/rafael-ramos.png", "imagens/ceara/dieguinho.png"]
var zdCeara = ["Zagueiro Direito", "zd-esc", "imagens/ceara/marllon.png", "imagens/ceara/eder.png", "imagens/ceara/gabriel-lacerda.png", "imagens/ceara/marcos-vitor.png"]
var zeCeara = ["Zagueiro Esquerdo", "ze-esc", "imagens/ceara/ramon-menezes.png", "imagens/ceara/luiz-otavio.png", "imagens/ceara/william-machado.png"]
var leCeara = ["Lateral Esquerdo", "le-esc", "imagens/ceara/matheus-bahia.png", "imagens/ceara/nicolas.png", "imagens/ceara/william-machado.png"]
var volCeara = ["1º Volante", "vol-esc", "imagens/ceara/richardson.png", "imagens/ceara/dieguinho.png", "imagens/ceara/fernando-sobral.png"]
var mcCeara = ["2º Volante", "mc-esc", "imagens/ceara/fernando-sobral.png", "imagens/ceara/lourenço.png", "imagens/ceara/matheus-araujo.png"]
var meiCeara = ["Meia", "mei-esc", "imagens/ceara/lucas-mugni.png", "imagens/ceara/romulo.png", "imagens/ceara/recalde.png", "imagens/ceara/matheus-araujo.png"]
var pdCeara = ["Ponta direita", "pd-esc", "imagens/ceara/pedro-henrique.png", "imagens/ceara/galeano.png", "imagens/ceara/joao-victor.png", "imagens/ceara/bruno-tubarao.png"]
var peCeara = ["Ponta esquerda", "pe-esc", "imagens/ceara/fernandinho.png", "imagens/ceara/pedro-henrique.png", "imagens/ceara/alejandro-martinez.png", "imagens/ceara/joao-victor.png"]
var caCeara = ["Centroavante", "ca-esc", "imagens/ceara/pedro-raul.png", "imagens/ceara/aylon.png"]

var dados = {
    Sport: [golSport, ldSport, zdSport, zeSport, leSport, volSport, mcSport, meiSport, pdSport, peSport, caSport],
    Bahia: [golBahia, ldBahia, zdBahia, zeBahia, leBahia, volBahia, mcBahia, meiBahia, pdBahia, peBahia, caBahia],
    Fortaleza: [golFortaleza, ldFortaleza, zdFortaleza, zeFortaleza, leFortaleza, volFortaleza, mcFortaleza, meiFortaleza, pdFortaleza, peFortaleza, caFortaleza],
    Vitoria:[golVitoria, ldVitoria, zdVitoria, zeVitoria, leVitoria, volVitoria, mcVitoria, meiVitoria, pdVitoria, peVitoria, caVitoria],
    Ceara: [golCeara, ldCeara,zdCeara, zeCeara, leCeara, volCeara, mcCeara, meiCeara, pdCeara, peCeara, caCeara]
};

function selecionarEscale(elemento){
    var time = elemento.value
    botarEscale(time, true, false, "", false)
}

function botarEscale(time, clean, perso, numb, check, elemento){
    
    console.log("check: ", check)
    if (check == true){
        console.log("Checando")
        if (document.getElementById("escolha")){
            console.log("Tem escolha")
            document.getElementById("escolha").remove()
            if (elemento){
                elemento.querySelector("button").innerHTML = "PERSONALIZAR TIMES"
                console.log("Tem elemento", elemento.querySelector("button").innerHTML)
            }
            return false
        } else{
            createEscolha()
        }
    }
    if (clean == true){
        limparEscolhaEscale()
    }
    limparCampoEscale()
    let timeValor = dados[time]
    let escolha
    for (i=0; i < timeValor.length; i++){
        let div = document.createElement("div")
        let span = document.createElement("div")
        let timeI = timeValor[i]
        let nome = timeI[0]
        let id = timeI[1]
        span.innerHTML = nome
        escolha = document.getElementById("escolha")
        if (escolha){
            escolha.appendChild(div)
            span.setAttribute("class", "span-escolha")
            div.appendChild(span)
            div.setAttribute("class", "nome-escolha")
            for (h=2; h < timeI.length; h++){
                let source = timeI[h]
                let imagem = document.createElement("img")
                imagem.setAttribute("src", source)
                div.appendChild(imagem)
                imagem.setAttribute("class", "jogador-selectable")
                imagem.setAttribute("data-info", time)
                imagem.setAttribute("onclick", "clicarEscale(this)")
                if (perso == true){
                    imagem.removeAttribute("onclick")
                    imagem.setAttribute("onclick", `alterarTime(this, '${numb}')`)
                }
                imagem.setAttribute("id", id)
            }
        }
    }
    if (escolha){
        if (time == "Fortaleza" || time == "Bahia" || time == "Vitoria" || time == "Ceara"){
            if (numb=="um"){console.log("EXECUTANDO CRIAÇÃO...", "Time: ", time, "Numb: ", numb)
            let divFortal = document.createElement("div")
            divFortal.setAttribute("class", "nome-escolha anormal")
            escolha.appendChild(divFortal)
            let imagemF = document.createElement("img")
            divFortal.appendChild(imagemF)
            imagemF.setAttribute("class", "jogador-selectable incomum")
            divFortal.style.flexDirection = "column"
            divFortal.style.opacity = "0"
            imagemF.style.cursor = "default"
            if (time == "Vitoria"){
                imagemF.setAttribute("class", "jogador-selectable incomum vitoria")
            }
            if (time == "Fortaleza" || time == "Bahia"){
                let imagemFD = document.createElement("img")
                divFortal.appendChild(imagemFD)
                imagemFD.setAttribute("class", "jogador-selectable incomum")
                imagemFD.style.cursor = "default" 
            }
        } 
    }     
}
}

function limparEscolhaEscale(){
    var escolhas = document.getElementsByClassName("nome-escolha")
    for (i = escolhas.length - 1; i >= 0; i--){
        escolhas[i].remove()
    }
}

function limparCampoEscale(){
    var jogadores = document.getElementsByClassName("jogador")
    for (i = jogadores.length - 1; i >= 0; i--){
        jogadores[i].setAttribute("src", "imagens/branco.png")
    }
}

function clicarEscale(elemento){
    let ver = verificarDuplicata("jogador", elemento.src)
    if (ver == false){
        return
    }
    if (elemento.id == "gol-esc"){
        document.getElementById("gol").src = elemento.src
    } if (elemento.id == "ld-esc"){
        document.getElementById("ld").src = elemento.src
    } if (elemento.id == "zd-esc"){
        document.getElementById("zd").src = elemento.src
    } if (elemento.id == "ze-esc"){
        document.getElementById("ze").src = elemento.src
    } if (elemento.id == "le-esc"){
        document.getElementById("le").src = elemento.src
    } if (elemento.id == "vol-esc"){
        document.getElementById("vol").src = elemento.src
    } if (elemento.id == "mc-esc"){
        document.getElementById("mc").src = elemento.src
    } if (elemento.id == "mei-esc"){
        document.getElementById("mei").src = elemento.src
    } if (elemento.id == "pd-esc"){
        document.getElementById("pd").src = elemento.src
    } if (elemento.id == "pe-esc"){
        document.getElementById("pe").src = elemento.src
    } if (elemento.id == "ca-esc"){
        document.getElementById("ca").src = elemento.src
    }


    
}

function alterarTime(elemento, numb){
    let numeros = {
        "gol-esc": 0,
        "ld-esc": 1,
        "zd-esc": 2,
        "ze-esc": 3,
        "le-esc": 4,
        "vol-esc": 5,
        "mc-esc": 6,
        "mei-esc": 7,
        "pd-esc": 8,
        "pe-esc": 9,
        "ca-esc": 10
    }
    let verificate = verificarDuplicataAntes("item", elemento.src)
    console.log("Verificate: ", verificate)
    if (verificate == true) {
        limpar()
        timesFut[elemento.dataset.info][numeros[elemento.id]] = elemento.src
        if (numb = "um"){
            botarUm(timeUno, false)
        } if (numb = "dois"){
            botarDois(timeDuno, false)
        }}
    // verificarDuplicata("item", true)
}

// function verificarDuplicata(classe, query){
//     console.log("Classe: ", classe)
//     let imagens = document.getElementsByClassName(classe);
//     let srcSet = new Set();
//     let permitidoCount = 0;
//     let permitido = "branco.png"
//     let nomeArquivo
//     for (let img of imagens) {
//         console.log("IMG: ", img)
//         console.log("Imagem source: ", img.src)
//         if (query == true){
//             let imgTrue = img.querySelector("img")
//             console.log(imgTrue.src)
//             nomeArquivo = imgTrue.src.substring(imgTrue.src.lastIndexOf("/") + 1) 
//         } else{
//             nomeArquivo = img.src.substring(img.src.lastIndexOf("/") + 1) 
//         }
        
//         console.log("SOURCE: ", nomeArquivo)
//         if (nomeArquivo == permitido) {
//             permitidoCount++;
//             continue;
//         }
//         if (srcSet.has(nomeArquivo)) {
//             limparCampoEscale()
//             alert("Não selecione jogadores iguais")
//             return false;
//         }
        
//         srcSet.add(nomeArquivo);
//     }

//     return true;
// }

// function verificarDuplicata(classe){
//     let imagens = document.getElementsByClassName(classe);
//     let srcSet = new Set();
//     let permitidoCount = 0;
//     let permitido = "branco.png"
//     let nomeArquivo
//     for (let img of imagens) {
//         nomeArquivo = img.src.substring(img.src.lastIndexOf("/") + 1) 
//         if (nomeArquivo == permitido) {
//             permitidoCount++;
//             continue;
//         }
//         if (srcSet.has(nomeArquivo)) {
//             // limparCampoEscale()
//             alert("Não selecione jogadores iguais")
//             return false;
//         }
        
//         srcSet.add(nomeArquivo);
//     }

//     return true;
// }

function verificarDuplicata(classe, source){
    let imagens = document.getElementsByClassName(classe);
    let srcSet = new Set();
    let permitidoCount = 0;
    let permitido = "branco.png"
   
    for (i=0; i < imagens.length; i++) {
        nomeArquivoAtual = source.substring(source.lastIndexOf("/") + 1) 
        nomeArquivo = imagens[i].src.substring(imagens[i].src.lastIndexOf("/") + 1)
        srcSet.add(nomeArquivo);
        if (nomeArquivoAtual == permitido) {
            permitidoCount++;
            continue; 
        }
        if (srcSet.has(nomeArquivoAtual)) {
            alert("Não selecione jogadores iguais")
            return false;
        }
        
    }

    return true;
}

function verificarDuplicataAntes(classe, sourceAntes){
    let imagens = document.getElementsByClassName(classe);
    let srcSet = new Set();
    let permitidoCount = 0;
    let permitido = "branco.png"
   
    for (i=0; i < imagens.length; i++) {

        let sourceImagens = imagens[i].querySelector("img").src
        nomeArquivoAtual = sourceAntes.substring(sourceAntes.lastIndexOf("/") + 1) 
        console.log(nomeArquivoAtual)
        nomeArquivo = sourceImagens.substring(sourceImagens.lastIndexOf("/") + 1)
        srcSet.add(nomeArquivo);
        if (nomeArquivoAtual == permitido) {
            permitidoCount++;
            continue; 
        }
        if (srcSet.has(nomeArquivoAtual)) {
            alert("Não selecione jogadores iguais")
            return false;
        }
        
    }

    return true;
}